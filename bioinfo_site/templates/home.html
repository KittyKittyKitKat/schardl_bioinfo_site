{# Copyright (c) 2023 Nyx Harris-Palmer, Tharanie Subramaniam #}
{% extends "layout.html" %}
{% block content %}
<div class="container">
  <div class="row g-0 justify-content-center">
    <div class="col">
      <div id="home-slideshow" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
          {% for i in range(images|length) %}
          <button
            type="button"
            data-bs-target="#home-slideshow"
            data-bs-slide-to="{{ loop.index0 }}"
            aria-label="Slide {{ loop.index }}"
            class="{{ 'active' if loop.first else ''}}"
            aria-current="{{ 'true' if loop.first else 'false'}}" >
          </button>
          {% endfor %}
        </div>
        <div class="carousel-inner">
          {% for image in images %}
          <div class="carousel-item {{ 'active' if loop.first else '' }} bg-dark">
            <div class="d-flex justify-content-center">
              <button
                class="btn btn-link"
                data-bs-toggle="modal"
                data-bs-target="#imageViewModal"
                data-bs-img-src="{{ url_for('static', filename='images/slideshow/' ~ image) }}"
              >
                <img
                  src="{{ url_for('static', filename='images/slideshow/' ~ image) }}"
                  class="d-block"
                  style="height: 600px; max-height: 600px !important;"
                >
              </button>
            </div>
          </div>
          {% endfor %}
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#home-slideshow"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#home-slideshow"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="imageViewModal" tabindex="-1" data-bs-theme="dark">
  <div class="modal-dialog modal-dialog-scrollable modal-fullscreen">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body text-center">
        <img class="h-100">
      </div>
    </div>
  </div>
</div>
<script>
  let imageViewModal = document.getElementById('imageViewModal');
  if (imageViewModal) {
      imageViewModal.addEventListener('show.bs.modal', event => {
      let image_button = event.relatedTarget;
      let image_src = image_button.getAttribute('data-bs-img-src');
      let modal_image = imageViewModal.querySelector(
        '.modal-content .modal-body img'
      );
      modal_image.src = image_src;
    });
  }
</script>
{% endblock content %}